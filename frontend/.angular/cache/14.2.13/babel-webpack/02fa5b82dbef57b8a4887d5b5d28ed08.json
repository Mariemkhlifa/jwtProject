{"ast":null,"code":"import { User } from '../models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/inscription.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/user.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../navbar/navbar.component\";\nexport let InscriptionComponent = /*#__PURE__*/(() => {\n  class InscriptionComponent {\n    constructor(inscriptionService, router, userService) {\n      this.inscriptionService = inscriptionService;\n      this.router = router;\n      this.userService = userService;\n      this.employee = new User();\n      this.genererMatricule();\n    }\n\n    genererMatricule() {\n      const anneeCourante = new Date().getFullYear();\n      let chiffresAleatoires = Math.floor(1000 + Math.random() * 9000);\n      let matricule = `${anneeCourante}${chiffresAleatoires}`;\n      this.checkMatriculeExistence(matricule);\n    }\n\n    checkMatriculeExistence(matricule) {\n      this.userService.getTousUsers().subscribe(tousLesUsers => {\n        const matriculeExiste = tousLesUsers.some(user => user.matricule == matricule);\n\n        if (matriculeExiste) {\n          this.genererMatricule();\n        } else {\n          this.employee.matricule = matricule;\n        }\n      }, error => {\n        console.error('Erreur lors de la récupération des utilisateurs :', error);\n      });\n    }\n\n    ngOnInit() {\n      if (!sessionStorage.getItem('login')) {\n        this.router.navigate(['/login']);\n      }\n    }\n\n    onSubmit() {\n      if (this.employee.dateNaissance && this.employee.matricule && this.employee.password && this.employee.lastName && this.employee.username && this.employee.email && this.employee.matricule && this.employee.tel) {\n        this.inscriptionService.createUser(this.employee).subscribe(response => {\n          console.log('Utilisateur inscrit', response);\n          this.router.navigate(['/acceuil']);\n        }, error => {\n          console.error('Erreur d\\'inscription :', error);\n          console.log('erreur');\n        });\n      } else {\n        alert('remplir les champs');\n      }\n    }\n\n  }\n\n  InscriptionComponent.ɵfac = function InscriptionComponent_Factory(t) {\n    return new (t || InscriptionComponent)(i0.ɵɵdirectiveInject(i1.InscriptionService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserService));\n  };\n\n  InscriptionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InscriptionComponent,\n    selectors: [[\"app-inscription\"]],\n    decls: 67,\n    vars: 8,\n    consts: [[1, \"inscription\"], [3, \"ngSubmit\"], [\"inscritform\", \"\"], [1, \"container\"], [1, \"left-inputs\"], [\"for\", \"name\"], [\"placeholder\", \"Nom\", \"type\", \"text\", \"id\", \"name\", \"name\", \"username\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"lastname\"], [\"placeholder\", \"Pr\\u00E9nom\", \"type\", \"text\", \"id\", \"lastname\", \"name\", \"lastname\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"email\"], [\"placeholder\", \"Email\", \"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\"], [\"placeholder\", \"Mot de passe\", \"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"right-inputs\"], [\"for\", \"sexe\"], [\"id\", \"sexe\", \"name\", \"sexe\", \"required\", \"\", 2, \"height\", \"50px\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\", 2, \"color\", \"grey\"], [\"value\", \"homme\"], [\"value\", \"femme\"], [\"for\", \"matricule\"], [\"placeholder\", \"Matricule\", \"type\", \"text\", \"id\", \"matricule\", \"name\", \"matricule\", \"readonly\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"tel\"], [\"placeholder\", \"T\\u00E9l\\u00E9phone\", \"type\", \"tel\", \"id\", \"tel\", \"name\", \"tel\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"dateNaissance\"], [\"placeholder\", \"Date de naissance\", \"type\", \"date\", \"id\", \"dateNaissance\", \"name\", \"dateNaissance\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\"]],\n    template: function InscriptionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"form\", 1, 2);\n        i0.ɵɵlistener(\"ngSubmit\", function InscriptionComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(4, \"legend\")(5, \"h1\");\n        i0.ɵɵtext(6, \"Inscription des employ\\u00E9es\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"table\")(8, \"div\", 3)(9, \"div\", 4)(10, \"tr\")(11, \"td\")(12, \"label\", 5);\n        i0.ɵɵtext(13, \"Nom \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"td\")(15, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.employee.username = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(16, \"tr\")(17, \"td\")(18, \"label\", 7);\n        i0.ɵɵtext(19, \"Pr\\u00E9nom \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"td\")(21, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.employee.lastName = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(22, \"tr\")(23, \"td\")(24, \"label\", 9);\n        i0.ɵɵtext(25, \"Email \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"td\")(27, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_27_listener($event) {\n          return ctx.employee.email = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"tr\")(29, \"td\")(30, \"label\", 11);\n        i0.ɵɵtext(31, \"Mot de passe \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"td\")(33, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_33_listener($event) {\n          return ctx.employee.password = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(34, \"div\", 13)(35, \"tr\")(36, \"td\")(37, \"label\", 14);\n        i0.ɵɵtext(38, \"Sexe \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"td\")(40, \"select\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_select_ngModelChange_40_listener($event) {\n          return ctx.employee.sexe = $event;\n        });\n        i0.ɵɵelementStart(41, \"option\", 16);\n        i0.ɵɵtext(42, \"S\\u00E9lectionnez le sexe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"option\", 17);\n        i0.ɵɵtext(44, \"Homme\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"option\", 18);\n        i0.ɵɵtext(46, \"Femme\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(47, \"tr\")(48, \"td\")(49, \"label\", 19);\n        i0.ɵɵtext(50, \"Matricule \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(51, \"td\")(52, \"input\", 20);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_52_listener($event) {\n          return ctx.employee.matricule = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(53, \"tr\")(54, \"td\")(55, \"label\", 21);\n        i0.ɵɵtext(56, \"T\\u00E9l\\u00E9phone \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(57, \"td\")(58, \"input\", 22);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_58_listener($event) {\n          return ctx.employee.tel = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(59, \"tr\")(60, \"td\")(61, \"label\", 23);\n        i0.ɵɵtext(62, \"Date_de_naissance\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(63, \"td\")(64, \"input\", 24);\n        i0.ɵɵlistener(\"ngModelChange\", function InscriptionComponent_Template_input_ngModelChange_64_listener($event) {\n          return ctx.employee.dateNaissance = $event;\n        });\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(65, \"button\", 25);\n        i0.ɵɵtext(66, \"Valider\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.username);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.lastName);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.password);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.sexe);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.matricule);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.tel);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.dateNaissance);\n      }\n    },\n    dependencies: [i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.NavbarComponent],\n    styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:auto;margin:0 auto;line-height:0px}.left-inputs[_ngcontent-%COMP%], .right-inputs[_ngcontent-%COMP%]{width:48%}form[_ngcontent-%COMP%]{height:auto;width:800px;background-color:#ffffff21;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.1);box-shadow:0 0 40px #08071099;padding:50px 35px}form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;letter-spacing:.5px;outline:none;border:none}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;font-weight:500;line-height:42px;text-align:center}label[_ngcontent-%COMP%]{color:#fff;display:block;margin-top:30px;font-size:16px;font-weight:500}input[_ngcontent-%COMP%]{display:block;height:50px;width:auto;background-color:#00000012;border-radius:3px;padding:0 10px;margin:8px;font-size:14px;font-weight:300}[_ngcontent-%COMP%]::placeholder{color:#787878}button[_ngcontent-%COMP%]{margin-top:50px;width:100%;background-color:#fdb17a;color:#080710;padding:15px 0;font-size:18px;font-weight:600;border-radius:5px;cursor:pointer}\"]\n  });\n  return InscriptionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}